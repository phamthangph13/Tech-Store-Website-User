<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Detail - TechStore</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .breadcrumb {
            display: flex;
            align-items: center;
            margin: 20px 0 30px;
            font-size: 14px;
        }
        
        .breadcrumb a {
            color: #3498db;
            text-decoration: none;
        }
        
        .breadcrumb span {
            margin: 0 10px;
            color: #95a5a6;
        }
        
        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 60px;
        }
        
        .product-gallery {
            position: relative;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .thumbnail-container {
            display: flex;
            gap: 10px;
        }
        
        .thumbnail {
            width: 80px;
            height: 80px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .thumbnail.active, .thumbnail:hover {
            opacity: 1;
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.4);
            transform: translateY(-3px);
        }
        
        .product-info h1 {
            font-size: 32px;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .product-category {
            display: inline-block;
            background: rgba(52, 152, 219, 0.9);
            color: #fff;
            padding: 5px 12px;
            margin-bottom: 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .product-price {
            font-size: 32px;
            font-weight: 700;
            color: #3498db;
            margin: 15px 0;
            display: flex;
            align-items: center;
        }
        
        .product-price::before {
            content: '$';
            font-size: 24px;
            margin-right: 2px;
            font-weight: 600;
        }
        
        .product-description {
            color: #7f8c8d;
            line-height: 1.7;
            margin-bottom: 25px;
            font-size: 16px;
        }
        
        .product-specs {
            margin-bottom: 30px;
        }
        
        .spec-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .spec-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .spec-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .spec-table td:first-child {
            font-weight: 600;
            color: #34495e;
            width: 35%;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .quantity-btn {
            background: #f1f1f1;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
        }
        
        .quantity-btn:hover {
            background: #e0e0e0;
        }
        
        .quantity-value {
            margin: 0 15px;
            font-size: 18px;
            width: 40px;
            text-align: center;
        }
        
        .add-to-cart-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            margin-bottom: 25px;
        }
        
        .add-to-cart-btn:hover {
            background: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .product-meta {
            margin-top: 15px;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .product-meta span {
            margin-right: 15px;
        }
        
        .product-meta i {
            margin-right: 5px;
            color: #3498db;
        }
        
        .tabs {
            margin-top: 60px;
            margin-bottom: 60px;
        }
        
        .tab-links {
            display: flex;
            border-bottom: 2px solid #ecf0f1;
            margin-bottom: 30px;
        }
        
        .tab-link {
            padding: 15px 25px;
            font-weight: 600;
            color: #7f8c8d;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .tab-link.active {
            color: #3498db;
        }
        
        .tab-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #3498db;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .full-specs table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .full-specs table th {
            text-align: left;
            padding: 12px 15px;
            background: #f8f9fa;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .full-specs table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .review {
            display: flex;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .review:last-child {
            border-bottom: none;
        }
        
        .review-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #3498db;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: 600;
            margin-right: 20px;
        }
        
        .review-content {
            flex: 1;
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .review-author {
            font-weight: 600;
            color: #2c3e50;
        }
        
        .review-date {
            color: #95a5a6;
            font-size: 14px;
        }
        
        .review-stars {
            margin-bottom: 10px;
            color: #f39c12;
        }
        
        .review-text {
            line-height: 1.6;
            color: #7f8c8d;
        }
        
        .related-products {
            margin-top: 60px;
            margin-bottom: 80px;
            padding: 40px;
            background-color: #f8f9fa;
            border-radius: 16px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .related-products h2 {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
            font-size: 28px;
            font-weight: 700;
            position: relative;
            padding-bottom: 15px;
        }
        
        .related-products h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background-color: #3498db;
            border-radius: 2px;
        }
        
        .related-products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }
        
        /* Product card styles specific for related products */
        .related-products .product-card {
            background-color: #fff;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .related-products .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.15);
        }
        
        .related-products .product-img {
            height: 200px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .related-products .product-actions {
            position: absolute;
            bottom: -20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }
        
        .related-products .product-card:hover .product-actions {
            opacity: 1;
            transform: translateY(-10px);
        }
        
        .related-products .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #fff;
            border: none;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #3498db;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .related-products .action-btn:hover {
            background-color: #3498db;
            color: #fff;
            transform: scale(1.1);
        }
        
        .related-products .tooltip {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #2c3e50;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
        }
        
        .related-products .action-btn:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        .related-products .product-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .related-products .product-category {
            color: #fff;
            background-color: #3498db;
            font-size: 10px;
            text-transform: uppercase;
            padding: 3px 8px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: inline-block;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
        
        .related-products .product-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            height: 44px;
        }
        
        .related-products .product-price {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: 700;
            color: #3498db;
        }
        
        .related-products .original-price {
            text-decoration: line-through;
            color: #95a5a6;
            font-size: 14px;
            font-weight: 400;
        }
        
        .related-products .discount-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #e74c3c;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1;
        }
        
        .related-products .view-details {
            margin-top: auto;
            display: inline-block;
            text-align: center;
            color: #3498db;
            text-decoration: none;
            border: 1px solid #3498db;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .related-products .view-details:hover {
            background-color: #3498db;
            color: #fff;
        }
        
        @media (max-width: 992px) {
            .product-detail-container {
                grid-template-columns: 1fr;
            }
            
            .related-products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .related-products {
                padding: 30px 20px;
            }
        }
        
        @media (max-width: 768px) {
            .tab-links {
                flex-wrap: wrap;
            }
            
            .tab-link {
                padding: 10px 15px;
            }
            
            .related-products-grid {
                grid-template-columns: 1fr;
                max-width: 400px;
                margin: 0 auto;
            }
            
            .related-products {
                padding: 25px 15px;
            }
            
            .related-products h2 {
                font-size: 24px;
            }
        }
        
        @media (max-width: 576px) {
            .related-products .product-img {
                height: 180px;
            }
        }
        
        /* Product Detail Page Specific Styles */
        .variant-selector, .color-selector {
            margin-bottom: 25px;
        }
        
        .variant-selector h3, .color-selector h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .variant-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .variant-option {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .variant-option.active {
            border-color: #3498db;
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        .variant-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .variant-price {
            color: #3498db;
            font-weight: 500;
        }
        
        .color-options {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #e0e0e0;
            transition: all 0.2s ease;
        }
        
        .color-option.active {
            border-color: #3498db;
            transform: scale(1.1);
        }
        
        .selected-color-name {
            font-size: 14px;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .original-price {
            text-decoration: line-through;
            color: #95a5a6;
            font-size: 18px;
        }
        
        .discount-badge {
            background-color: #e74c3c;
            color: white;
            padding: 3px 6px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .product-highlights {
            margin: 20px 0;
        }
        
        .product-highlights h4, .product-info-section h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .product-highlights ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        
        .product-highlights li {
            margin-bottom: 5px;
            color: #34495e;
        }
        
        .product-info-section {
            margin-bottom: 20px;
        }
        
        .product-videos {
            margin: 30px 0;
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
        }
        
        .product-videos h3 {
            font-size: 22px;
            margin-bottom: 20px;
            color: #2c3e50;
            position: relative;
            padding-bottom: 10px;
        }
        
        .product-videos h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: #3498db;
        }
        
        .video-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .product-video {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            background-color: #fff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .product-video:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .product-video video {
            width: 100%;
            display: block;
            background-color: #000;
        }
        
        /* Custom video controls styling */
        .product-video video::-webkit-media-controls {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .product-video video::-webkit-media-controls-panel {
            padding: 0 5px;
        }
        
        @media (max-width: 768px) {
            .product-videos {
                padding: 15px;
            }
            
            .video-container {
                grid-template-columns: 1fr;
            }
        }
        
        /* Add download button for videos */
        .video-download-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(52, 152, 219, 0.8);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.2s ease;
            text-decoration: none;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            z-index: 10;
            opacity: 0;
            transform: translateY(-5px);
        }
        
        .video-wrapper:hover .video-download-btn {
            opacity: 1;
            transform: translateY(0);
        }
        
        .video-download-btn:hover {
            background-color: rgba(52, 152, 219, 1);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
        }
        
        .video-wrapper {
            position: relative;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>TechStore</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                </ul>
            </nav>
            <div class="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span id="cart-count">0</span>
            </div>
        </div>
    </header>

    <div class="cart-sidebar">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button id="close-cart">&times;</button>
        </div>
        <div class="cart-items">
            <!-- Cart items will be added here dynamically -->
        </div>
        <div class="cart-total">
            <h3>Total: <span id="cart-total-price">0</span> ₫</h3>
        </div>
        <button id="checkout-btn">Checkout</button>
    </div>

    <!-- Checkout Sheet -->
    <div class="checkout-overlay" id="checkout-overlay">
        <div class="checkout-sheet">
            <div class="checkout-header">
                <h2>Complete Your Order</h2>
                <button id="close-checkout">&times;</button>
            </div>
            <div class="checkout-content">
                <div class="checkout-summary">
                    <h3>Order Summary</h3>
                    <div class="checkout-items">
                        <!-- Summary of cart items will be displayed here -->
                    </div>
                    <div class="checkout-subtotal">
                        <div>Subtotal:</div>
                        <div class="price"><span id="checkout-subtotal">0</span> ₫</div>
                    </div>
                    <div class="checkout-shipping">
                        <div>Shipping:</div>
                        <div class="price"><span id="checkout-shipping">0</span> ₫</div>
                    </div>
                    <div class="checkout-total">
                        <div>Total:</div>
                        <div class="price"><span id="checkout-total">0</span> ₫</div>
                    </div>
                </div>
                <form id="checkout-form">
                    <h3>Shipping Information</h3>
                    <div class="form-group">
                        <label for="full-name">Full Name</label>
                        <input type="text" id="full-name" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Delivery Address</label>
                        <textarea id="address" required rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" id="city" required>
                    </div>
                    
                    <h3>Payment Method</h3>
                    <div class="payment-methods">
                        <div class="payment-method">
                            <input type="radio" id="cod" name="payment-method" value="cod" checked>
                            <label for="cod">
                                <i class="fas fa-money-bill-wave"></i>
                                <span>Cash On Delivery</span>
                            </label>
                        </div>
                        <div class="payment-method">
                            <input type="radio" id="bank-transfer" name="payment-method" value="bank-transfer">
                            <label for="bank-transfer">
                                <i class="fas fa-university"></i>
                                <span>Bank Transfer</span>
                            </label>
                        </div>
                        <div class="payment-method">
                            <input type="radio" id="credit-card" name="payment-method" value="credit-card">
                            <label for="credit-card">
                                <i class="fas fa-credit-card"></i>
                                <span>Credit/Debit Card</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="checkout-actions">
                        <button type="button" id="cancel-checkout">Cancel</button>
                        <button type="submit" id="place-order-btn">Place Order</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <main class="container">
        <div class="breadcrumb">
            <a href="index.html">Home</a>
            <span>/</span>
            <a href="products.html">Products</a>
            <span>/</span>
            <span id="product-breadcrumb-name">Dell XPS 15</span>
        </div>
        
        <div class="product-detail-container">
            <div class="product-gallery">
                <div class="main-image" id="main-product-image"></div>
                <div class="thumbnail-container" id="thumbnail-container">
                    <!-- Thumbnails will be added dynamically -->
                </div>
            </div>
            
            <div class="product-info">
                <div class="product-category" id="product-category">Ultrabook</div>
                <h1 id="product-title">Dell XPS 15</h1>
                <div class="product-price" id="product-price">1799.99</div>
                <div class="product-description" id="product-description">
                    Premium ultrabook with 15.6" 4K OLED display, Intel Core i7, 16GB RAM, 1TB SSD. The Dell XPS 15 combines powerful performance with stunning visuals in a sleek, lightweight design perfect for professionals and content creators.
                </div>
                
                <div class="product-specs">
                    <h3>Key Specifications</h3>
                    <table class="spec-table">
                        <tr>
                            <td>Processor</td>
                            <td>Intel Core i7-11800H</td>
                        </tr>
                        <tr>
                            <td>RAM</td>
                            <td>16GB DDR4</td>
                        </tr>
                        <tr>
                            <td>Storage</td>
                            <td>1TB SSD</td>
                        </tr>
                        <tr>
                            <td>Display</td>
                            <td>15.6" 4K OLED (3840 x 2160)</td>
                        </tr>
                        <tr>
                            <td>Graphics</td>
                            <td>NVIDIA GeForce RTX 3050 Ti</td>
                        </tr>
                    </table>
                </div>
                
                <div class="quantity-selector">
                    <button class="quantity-btn decrease-qty">-</button>
                    <input type="number" class="quantity-value" value="1" min="1" max="10">
                    <button class="quantity-btn increase-qty">+</button>
                </div>
                
                <button class="add-to-cart-btn" id="detail-add-to-cart">
                    <i class="fas fa-shopping-cart"></i> Add to Cart
                </button>
                
                <div class="product-meta">
                    <span><i class="fas fa-check-circle"></i> In Stock</span>
                    <span><i class="fas fa-truck"></i> Free Shipping</span>
                    <span><i class="fas fa-undo"></i> 30-Day Returns</span>
                </div>
            </div>
        </div>
        
        <div class="tabs">
            <div class="tab-links">
                <div class="tab-link active" data-tab="description">Description</div>
                <div class="tab-link" data-tab="specifications">Full Specifications</div>
                <div class="tab-link" data-tab="reviews">Reviews</div>
            </div>
            
            <div class="tab-content active" id="description">
                <h3>Product Description</h3>
                <p>Experience unrivaled performance with the Dell XPS 15, a premium ultrabook designed for professionals and creatives who demand the best. The stunning 15.6" 4K OLED display delivers vibrant colors and deep contrasts, making it perfect for photo and video editing.</p>
                <p>Powered by an 11th Gen Intel Core i7 processor and NVIDIA GeForce RTX 3050 Ti graphics, this laptop handles demanding applications with ease. The 16GB of RAM ensures smooth multitasking, while the spacious 1TB SSD provides ample storage and lightning-fast boot times.</p>
                <p>The CNC-machined aluminum chassis and carbon fiber palm rest offer a premium look and feel, while keeping the weight to a minimum. Despite its powerful components, the XPS 15 maintains excellent battery life, allowing you to work all day without worrying about finding a power outlet.</p>
                <p>Advanced thermal design with dual fans and heat pipes ensures the laptop stays cool even under heavy workloads, and the InfinityEdge display minimizes bezels for a more immersive viewing experience.</p>
            </div>
            
            <div class="tab-content" id="specifications">
                <h3>Technical Specifications</h3>
                <div class="full-specs">
                    <table>
                        <tr>
                            <th colspan="2">Processor</th>
                        </tr>
                        <tr>
                            <td>CPU Model</td>
                            <td>Intel Core i7-11800H</td>
                        </tr>
                        <tr>
                            <td>Base Clock</td>
                            <td>2.3 GHz</td>
                        </tr>
                        <tr>
                            <td>Turbo Boost</td>
                            <td>Up to 4.6 GHz</td>
                        </tr>
                        <tr>
                            <td>Cores/Threads</td>
                            <td>8 cores / 16 threads</td>
                        </tr>
                        <tr>
                            <th colspan="2">Memory</th>
                        </tr>
                        <tr>
                            <td>RAM</td>
                            <td>16GB DDR4 3200MHz (Dual Channel)</td>
                        </tr>
                        <tr>
                            <td>Expandable</td>
                            <td>Up to 64GB (2 SODIMM slots)</td>
                        </tr>
                        <tr>
                            <th colspan="2">Storage</th>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>1TB M.2 PCIe NVMe SSD</td>
                        </tr>
                        <tr>
                            <td>Expansion</td>
                            <td>1 M.2 2280 PCIe x4 slot</td>
                        </tr>
                        <tr>
                            <th colspan="2">Display</th>
                        </tr>
                        <tr>
                            <td>Size</td>
                            <td>15.6 inches</td>
                        </tr>
                        <tr>
                            <td>Resolution</td>
                            <td>3840 x 2160 (4K UHD)</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>OLED, 400-nit, 100% DCI-P3 color gamut</td>
                        </tr>
                        <tr>
                            <td>Touch</td>
                            <td>Optional</td>
                        </tr>
                        <tr>
                            <th colspan="2">Graphics</th>
                        </tr>
                        <tr>
                            <td>GPU</td>
                            <td>NVIDIA GeForce RTX 3050 Ti (4GB GDDR6)</td>
                        </tr>
                        <tr>
                            <th colspan="2">Connectivity</th>
                        </tr>
                        <tr>
                            <td>Wi-Fi</td>
                            <td>Killer Wi-Fi 6 AX1650 (2x2)</td>
                        </tr>
                        <tr>
                            <td>Bluetooth</td>
                            <td>Bluetooth 5.1</td>
                        </tr>
                        <tr>
                            <th colspan="2">Ports</th>
                        </tr>
                        <tr>
                            <td>USB-C</td>
                            <td>2x Thunderbolt 4 (USB-C) with Power Delivery & DisplayPort</td>
                        </tr>
                        <tr>
                            <td>USB-A</td>
                            <td>1x USB 3.2 Gen 2</td>
                        </tr>
                        <tr>
                            <td>Audio</td>
                            <td>3.5mm headphone/microphone combo jack</td>
                        </tr>
                        <tr>
                            <td>Card Reader</td>
                            <td>SD card reader (UHS-III)</td>
                        </tr>
                    </table>
                </div>
            </div>
            
            <div class="tab-content" id="reviews">
                <h3>Customer Reviews</h3>
                <div class="review">
                    <div class="review-avatar">J</div>
                    <div class="review-content">
                        <div class="review-header">
                            <div class="review-author">John Smith</div>
                            <div class="review-date">2 months ago</div>
                        </div>
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="review-text">
                            <p>The Dell XPS 15 is probably the best Windows laptop I've ever owned. The build quality is amazing, and the 4K OLED display is stunning. Performance is excellent for both development work and occasional video editing.</p>
                            <p>Battery life is decent for a laptop with these specs, usually lasting me around 6-7 hours with regular use. The keyboard is comfortable for long typing sessions, and the trackpad is smooth and responsive.</p>
                        </div>
                    </div>
                </div>
                <div class="review">
                    <div class="review-avatar">S</div>
                    <div class="review-content">
                        <div class="review-header">
                            <div class="review-author">Sarah Johnson</div>
                            <div class="review-date">1 month ago</div>
                        </div>
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <div class="review-text">
                            <p>As a graphic designer, I needed a powerful laptop with a color-accurate display, and the XPS 15 delivers on both fronts. The OLED screen is gorgeous, and the performance is snappy even with Adobe Creative Cloud apps.</p>
                            <p>My only complaint is that it can get quite hot when doing intensive tasks, and the fans can be noisy. Otherwise, it's a fantastic machine that I'd highly recommend to other creative professionals.</p>
                        </div>
                    </div>
                </div>
                <div class="review">
                    <div class="review-avatar">M</div>
                    <div class="review-content">
                        <div class="review-header">
                            <div class="review-author">Michael Chen</div>
                            <div class="review-date">2 weeks ago</div>
                        </div>
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <div class="review-text">
                            <p>I've been using the Dell XPS 15 for about two weeks now, and I'm very impressed. The build quality is top-notch, and the performance is excellent for both work and gaming.</p>
                            <p>The RTX 3050 Ti handles most games at medium to high settings, which is great for a laptop that's not primarily designed for gaming. The speakers are surprisingly good for a laptop, and the webcam quality is decent despite its small size.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="related-products">
            <h2>Related Products</h2>
            <div class="related-products-grid" id="related-products">
                <!-- Related products will be added dynamically -->
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 TechStore. All Rights Reserved.</p>
        </div>
    </footer>

    <div id="notification" class="notification"></div>

    <script src="js/products.js"></script>
    <script src="js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get the product ID from URL query parameter
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            
            if (!productId) {
                console.error('No product ID provided in URL');
                document.querySelector('.product-detail-container').innerHTML = `
                    <div class="error-message">
                        <h2>Product Not Found</h2>
                        <p>Sorry, the product you are looking for was not found.</p>
                        <a href="products.html" class="add-to-cart-btn">Browse Products</a>
                    </div>
                `;
                return;
            }
            
            // Call our API function to fetch the product
            fetchProductById(productId)
                .then(product => {
                    if (!product) {
                        throw new Error('Product not found');
                    }
                    
                    // Update product details
                    document.getElementById('product-breadcrumb-name').textContent = product.name;
                    document.getElementById('product-category').textContent = getCategoryFromIds(product.category_ids);
                    document.getElementById('product-title').textContent = product.name;
                    
                    // Format price with commas for better readability (e.g., 29,000,000)
                    const formatPrice = (price) => {
                        return parseInt(price).toLocaleString();
                    };
                    
                    // Calculate and display discount
                    const basePrice = parseInt(product.price);
                    const discountPercent = parseInt(product.discount_percent);
                    const discountPrice = product.discount_price;
                    
                    const discountDisplay = discountPercent > 0 ? 
                        `<div class="original-price">₫${formatPrice(basePrice)}</div>
                         <div class="discount-badge">-${discountPercent}%</div>` : '';
                    
                    document.getElementById('product-price').innerHTML = `₫${formatPrice(discountPrice)} ${discountDisplay}`;
                    document.getElementById('product-description').textContent = product.short_description || '';
                    
                    // Set main product image
                    const mainImageUrl = product.image_urls && product.image_urls.length > 0 
                        ? product.image_urls[0] 
                        : (product.thumbnail || 'images/default-laptop.jpg');
                    
                    document.getElementById('main-product-image').style.backgroundImage = `url('${mainImageUrl}')`;
                    
                    // Create thumbnails for all images
                    const thumbnailContainer = document.getElementById('thumbnail-container');
                    thumbnailContainer.innerHTML = '';
                    
                    const imageUrls = product.image_urls || [product.thumbnail || 'images/default-laptop.jpg'];
                    imageUrls.forEach((imageUrl, index) => {
                        const thumb = document.createElement('div');
                        thumb.classList.add('thumbnail');
                        if (index === 0) thumb.classList.add('active');
                        thumb.style.backgroundImage = `url('${imageUrl}')`;
                        thumb.dataset.image = imageUrl;
                        thumbnailContainer.appendChild(thumb);
                    });
                    
                    // Update specifications table
                    const specTable = document.querySelector('.spec-table');
                    specTable.innerHTML = `
                        <tr>
                            <td>Processor</td>
                            <td>${product.specs.cpu}</td>
                        </tr>
                        <tr>
                            <td>RAM</td>
                            <td>${product.specs.ram}</td>
                        </tr>
                        <tr>
                            <td>Storage</td>
                            <td>${product.specs.storage}</td>
                        </tr>
                        <tr>
                            <td>Display</td>
                            <td>${product.specs.display}</td>
                        </tr>
                        <tr>
                            <td>Graphics</td>
                            <td>${product.specs.gpu}</td>
                        </tr>
                    `;
                    
                    // Add variant selection if available
                    const productInfo = document.querySelector('.product-info');
                    if (product.variant_specs && product.variant_specs.length > 0) {
                        const variantSelector = document.createElement('div');
                        variantSelector.classList.add('variant-selector');
                        variantSelector.innerHTML = `
                            <h3>Configuration Options</h3>
                            <div class="variant-options">
                                ${product.variant_specs.map((variant, index) => `
                                    <div class="variant-option ${index === 1 ? 'active' : ''}" data-variant-index="${index}">
                                        <div class="variant-name">${variant.name}</div>
                                        <div class="variant-price">₫${formatPrice(variant.price - (variant.price * variant.discount_percent / 100))}</div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        
                        // Insert variant selector before quantity selector
                        const quantitySelector = document.querySelector('.quantity-selector');
                        if (quantitySelector) {
                            productInfo.insertBefore(variantSelector, quantitySelector);
                        }
                        
                        // Add event listeners to variant options
                        setTimeout(() => {
                            const variantOptions = document.querySelectorAll('.variant-option');
                            variantOptions.forEach(option => {
                                option.addEventListener('click', function() {
                                    variantOptions.forEach(o => o.classList.remove('active'));
                                    this.classList.add('active');
                                    
                                    // Update specs based on selected variant
                                    const variantIndex = parseInt(this.dataset.variantIndex);
                                    const selectedVariant = product.variant_specs[variantIndex];
                                    
                                    // Update spec table
                                    if (selectedVariant.specs) {
                                        specTable.innerHTML = `
                                            <tr>
                                                <td>Processor</td>
                                                <td>${selectedVariant.specs.cpu}</td>
                                            </tr>
                                            <tr>
                                                <td>RAM</td>
                                                <td>${selectedVariant.specs.ram}</td>
                                            </tr>
                                            <tr>
                                                <td>Storage</td>
                                                <td>${selectedVariant.specs.storage}</td>
                                            </tr>
                                            <tr>
                                                <td>Display</td>
                                                <td>${selectedVariant.specs.display}</td>
                                            </tr>
                                            <tr>
                                                <td>Graphics</td>
                                                <td>${selectedVariant.specs.gpu}</td>
                                            </tr>
                                        `;
                                    }
                                    
                                    // Update price
                                    const variantPrice = selectedVariant.price;
                                    const variantDiscountPercent = selectedVariant.discount_percent;
                                    const variantDiscountPrice = variantPrice - (variantPrice * variantDiscountPercent / 100);
                                    
                                    const variantDiscountDisplay = variantDiscountPercent > 0 ? 
                                        `<div class="original-price">₫${formatPrice(variantPrice)}</div>
                                         <div class="discount-badge">-${variantDiscountPercent}%</div>` : '';
                                    
                                    document.getElementById('product-price').innerHTML = 
                                        `₫${formatPrice(variantDiscountPrice)} ${variantDiscountDisplay}`;
                                });
                            });
                        }, 100);
                    }
                    
                    // Add color selection if available
                    if (product.colors && product.colors.length > 0) {
                        const colorSelector = document.createElement('div');
                        colorSelector.classList.add('color-selector');
                        colorSelector.innerHTML = `
                            <h3>Color Options</h3>
                            <div class="color-options">
                                ${product.colors.map((color, index) => `
                                    <div class="color-option ${index === 0 ? 'active' : ''}" 
                                         data-color-index="${index}" 
                                         data-color-name="${color.name}"
                                         data-price-adjustment="${color.price_adjustment || 0}"
                                         style="background-color: ${color.code}">
                                    </div>
                                `).join('')}
                            </div>
                            <div class="selected-color-name">Selected: ${product.colors[0].name}</div>
                        `;
                        
                        // Insert color selector before quantity selector
                        const quantitySelector = document.querySelector('.quantity-selector');
                        if (quantitySelector) {
                            productInfo.insertBefore(colorSelector, quantitySelector);
                        }
                        
                        // Add event listeners to color options
                        setTimeout(() => {
                            const colorOptions = document.querySelectorAll('.color-option');
                            colorOptions.forEach(colorOption => {
                                colorOption.addEventListener('click', () => {
                                    // Remove active class from all options
                                    colorOptions.forEach(option => option.classList.remove('active'));
                                    // Add active class to selected option
                                    colorOption.classList.add('active');
                                    
                                    // Update selected color name
                                    const colorName = colorOption.getAttribute('data-color-name');
                                    document.querySelector('.selected-color-name').textContent = `Selected: ${colorName}`;
                                    
                                    // Get selected variant price
                                    const selectedVariantElement = document.querySelector('.variant-option.active');
                                    const selectedVariantIndex = selectedVariantElement ? parseInt(selectedVariantElement.dataset.variantIndex) : 0;
                                    const selectedVariant = product.variant_specs && product.variant_specs.length > 0
                                        ? product.variant_specs[selectedVariantIndex]
                                        : { name: 'Standard', price: product.price, discount_percent: product.discount_percent };
                                    
                                    // Calculate price with color adjustment
                                    const variantPrice = selectedVariant.price;
                                    const variantDiscountPercent = selectedVariant.discount_percent;
                                    const colorPriceAdjustment = parseInt(colorOption.getAttribute('data-price-adjustment') || 0);
                                    
                                    // Calculate discounted price
                                    const discountedVariantPrice = variantPrice - (variantPrice * variantDiscountPercent / 100);
                                    const finalPrice = discountedVariantPrice + colorPriceAdjustment;
                                    
                                    // Update displayed price
                                    const priceElement = document.getElementById('product-price');
                                    if (priceElement) {
                                        const variantDiscountDisplay = variantDiscountPercent > 0 ? 
                                            `<div class="original-price">₫${formatPrice(variantPrice)}</div>
                                             <div class="discount-badge">-${variantDiscountPercent}%</div>` : '';
                                        
                                        priceElement.innerHTML = `₫${formatPrice(finalPrice)} ${variantDiscountDisplay}`;
                                        
                                        // Show color adjustment if any
                                        if (colorPriceAdjustment !== 0) {
                                            const colorAdjustmentElement = document.createElement('div');
                                            colorAdjustmentElement.classList.add('color-price-adjustment');
                                            colorAdjustmentElement.textContent = `Color adjustment: ${colorPriceAdjustment > 0 ? '+' : ''}₫${formatPrice(colorPriceAdjustment)}`;
                                            colorAdjustmentElement.style.fontSize = '14px';
                                            colorAdjustmentElement.style.color = colorPriceAdjustment > 0 ? '#e74c3c' : '#27ae60';
                                            
                                            // Remove any existing adjustment info
                                            const existingAdjustment = document.querySelector('.color-price-adjustment');
                                            if (existingAdjustment) {
                                                existingAdjustment.remove();
                                            }
                                            
                                            priceElement.appendChild(colorAdjustmentElement);
                                        } else {
                                            // Remove adjustment info if no adjustment
                                            const existingAdjustment = document.querySelector('.color-price-adjustment');
                                            if (existingAdjustment) {
                                                existingAdjustment.remove();
                                            }
                                        }
                                    }
                                });
                            });
                        }, 100);
                    }
                    
                    // Add thumbnails event listeners
                    setTimeout(() => {
                        const thumbnails = document.querySelectorAll('.thumbnail');
                        thumbnails.forEach(thumb => {
                            thumb.addEventListener('click', function() {
                                thumbnails.forEach(t => t.classList.remove('active'));
                                this.classList.add('active');
                                document.getElementById('main-product-image').style.backgroundImage = this.style.backgroundImage;
                            });
                        });
                    }, 100);
                    
                    // Update the description tab content
                    const descriptionTab = document.getElementById('description');
                    if (descriptionTab) {
                        descriptionTab.innerHTML = `
                            <h3>Product Description</h3>
                            <p>${product.short_description || ''}</p>
                            
                            ${product.highlights && product.highlights.length > 0 ? `
                                <div class="product-highlights">
                                    <h4>Highlights</h4>
                                    <ul>
                                        ${product.highlights.map(highlight => `<li>${highlight}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                            
                            ${product.product_info && product.product_info.length > 0 ? 
                                product.product_info.map(info => `
                                    <div class="product-info-section">
                                        <h4>${info.title}</h4>
                                        <p>${info.content}</p>
                                    </div>
                                `).join('') : ''}
                        `;
                    }
                    
                    // Update the specifications tab with full specs
                    const specificationsTab = document.getElementById('specifications');
                    if (specificationsTab && product.specs) {
                        specificationsTab.innerHTML = `
                            <h3>Technical Specifications</h3>
                            <div class="full-specs">
                                <table>
                                    <tr>
                                        <th colspan="2">Product Information</th>
                                    </tr>
                                    <tr>
                                        <td>Brand</td>
                                        <td>${product.brand || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Model</td>
                                        <td>${product.model || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <th colspan="2">Performance</th>
                                    </tr>
                                    <tr>
                                        <td>Processor</td>
                                        <td>${product.specs.cpu || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Graphics</td>
                                        <td>${product.specs.gpu || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Memory</td>
                                        <td>${product.specs.ram || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Storage</td>
                                        <td>${product.specs.storage || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <th colspan="2">Display</th>
                                    </tr>
                                    <tr>
                                        <td>Screen</td>
                                        <td>${product.specs.display || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <th colspan="2">Other</th>
                                    </tr>
                                    <tr>
                                        <td>Operating System</td>
                                        <td>${product.specs.os || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Battery</td>
                                        <td>${product.specs.battery || 'N/A'}</td>
                                    </tr>
                                    <tr>
                                        <td>Ports</td>
                                        <td>${product.specs.ports ? product.specs.ports.join(', ') : 'N/A'}</td>
                                    </tr>
                                </table>
                            </div>
                        `;
                    }
                    
                    // Add video section if videos are available
                    if (product.video_urls && product.video_urls.length > 0) {
                        const videoSection = document.createElement('div');
                        videoSection.classList.add('product-videos');
                        videoSection.innerHTML = `
                            <h3>Product Videos</h3>
                            <div class="video-container">
                                ${product.video_urls.map(video => `
                                    <div class="product-video">
                                        <div class="video-wrapper">
                                            <video controls>
                                                <source src="${video}" type="video/mp4">
                                                Your browser does not support the video tag.
                                            </video>
                                            <a href="${video}" download class="video-download-btn">
                                                <i class="fas fa-download"></i> Download
                                            </a>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `;
                        
                        // Insert after tabs
                        const tabsSection = document.querySelector('.tabs');
                        if (tabsSection) {
                            tabsSection.parentNode.insertBefore(videoSection, tabsSection.nextSibling);
                        }
                    }
                    
                    // Handle add to cart
                    const addToCartButton = document.getElementById('detail-add-to-cart');
                    if (addToCartButton) {
                        addToCartButton.addEventListener('click', () => {
                            const quantity = parseInt(document.querySelector('.quantity-value').value);
                            
                            // Get selected variant
                            const selectedVariantElement = document.querySelector('.variant-option.active');
                            const selectedVariantIndex = selectedVariantElement ? parseInt(selectedVariantElement.dataset.variantIndex) : 0;
                            const selectedVariant = product.variant_specs && product.variant_specs.length > 0
                                ? product.variant_specs[selectedVariantIndex]
                                : { name: 'Standard', price: product.price, discount_percent: product.discount_percent };
                            
                            // Get selected color
                            const selectedColorElement = document.querySelector('.color-option.active');
                            const selectedColorIndex = selectedColorElement ? parseInt(selectedColorElement.dataset.colorIndex) : 0;
                            const selectedColor = product.colors && product.colors.length > 0
                                ? product.colors[selectedColorIndex]
                                : { name: 'Default', price_adjustment: 0 };
                            
                            // Calculate final price with variant and color adjustments
                            const variantPrice = selectedVariant.price;
                            const variantDiscountPercent = selectedVariant.discount_percent;
                            const colorPriceAdjustment = parseInt(selectedColor.price_adjustment || 0);
                            
                            const finalPrice = (variantPrice - (variantPrice * variantDiscountPercent / 100)) + colorPriceAdjustment;
                            
                            console.log('Adding to cart with details:', {
                                productId: product._id,
                                variant: selectedVariant.name,
                                color: selectedColor.name,
                                colorAdjustment: colorPriceAdjustment,
                                finalPrice: finalPrice
                            });
                            
                            // Create cart item
                            const cartItem = {
                                id: product._id,
                                title: product.name,
                                variant: selectedVariant.name,
                                color: selectedColor.name,
                                price: finalPrice,
                                original_price: variantPrice,
                                discount_percent: variantDiscountPercent,
                                color_adjustment: colorPriceAdjustment,
                                image: product.image_urls ? product.image_urls[0] : (product.thumbnail || 'images/default-laptop.jpg'),
                                quantity: quantity
                            };
                            
                            // Add to cart
                            addProductToCart(cartItem);
                            
                            // Show notification
                            showNotification(`${product.name} added to your cart!`);
                        });
                    }
                    
                    // Fetch related products based on category
                    if (product.category_ids && product.category_ids.length > 0) {
                        fetchProducts({ 
                            category: product.category_ids[0],
                            limit: 4
                        }).then(result => {
                            // Filter out the current product
                            const relatedProducts = result.products.filter(p => p.id !== product._id).slice(0, 4);
                            displayRelatedProducts(relatedProducts);
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching product:', error);
                    document.querySelector('.product-detail-container').innerHTML = `
                        <div class="error-message">
                            <h2>Product Not Found</h2>
                            <p>Sorry, the product you are looking for was not found.</p>
                            <a href="products.html" class="add-to-cart-btn">Browse Products</a>
                        </div>
                    `;
                });
                
            // Function to display related products
            function displayRelatedProducts(products) {
                const container = document.getElementById('related-products');
                if (!container) return;
                
                container.innerHTML = '';
                
                products.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.classList.add('product-card');
                    
                    const discountBadge = product.discount_percent > 0 
                        ? `<div class="discount-badge">-${product.discount_percent}%</div>` 
                        : '';
                    
                    const formattedPrice = (price) => parseInt(price).toLocaleString();
                    const priceDisplay = product.discount_percent > 0
                        ? `
                            <div class="product-price">
                                ₫${formattedPrice(product.discount_price)}
                                <span class="original-price">₫${formattedPrice(product.price)}</span>
                            </div>
                        `
                        : `<div class="product-price">₫${formattedPrice(product.price)}</div>`;
                    
                    productCard.innerHTML = `
                        <div class="product-img" style="background-image: url('${product.image}')">
                            ${discountBadge}
                            <div class="product-actions">
                                <button class="action-btn quick-view" data-id="${product.id}">
                                    <i class="fas fa-eye"></i>
                                    <span class="tooltip">Quick View</span>
                                </button>
                                <button class="action-btn add-to-cart" data-id="${product.id}">
                                    <i class="fas fa-shopping-cart"></i>
                                    <span class="tooltip">Add to Cart</span>
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-title">${product.title}</h3>
                            ${priceDisplay}
                            <a href="product-detail.html?id=${product.id}" class="view-details">View Details</a>
                        </div>
                    `;
                    
                    container.appendChild(productCard);
                });
                
                // Add event listeners to related products buttons
                const quickViewButtons = container.querySelectorAll('.quick-view');
                quickViewButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.dataset.id;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            showQuickViewModal(product);
                        }
                    });
                });
                
                const addToCartButtons = container.querySelectorAll('.add-to-cart');
                addToCartButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.dataset.id;
                        const product = products.find(p => p.id === productId);
                        if (product) {
                            addProductToCart({
                                id: product.id,
                                title: product.title,
                                variant: 'Standard',
                                color: 'Default',
                                price: product.discount_price || product.price,
                                image: product.image,
                                quantity: 1
                            });
                            
                            showNotification(`${product.title} added to your cart!`);
                        }
                    });
                });
            }
            
            // Function to add item to cart
            function addProductToCart(item) {
                console.log('Adding to cart:', item);
                
                // Ensure the item has all required properties
                if (!item.id) {
                    console.error('Cart item missing ID!', item);
                    showNotification('Error adding product to cart: Missing ID', 'error');
                    return;
                }
                
                // Get existing cart from local storage
                let cart = JSON.parse(localStorage.getItem('cart') || '[]');
                
                // Normalize the item ID to string for consistent comparison
                item.id = item.id.toString();
                
                // Check if similar item is already in cart
                const existingItemIndex = cart.findIndex(cartItem => 
                    cartItem.id.toString() === item.id && 
                    cartItem.variant === item.variant && 
                    cartItem.color === item.color
                );
                
                if (existingItemIndex >= 0) {
                    console.log('Updating existing cart item quantity');
                    cart[existingItemIndex].quantity += item.quantity;
                } else {
                    console.log('Adding new item to cart');
                    cart.push(item);
                }
                
                // Save to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                console.log('Cart saved to localStorage:', cart);
                
                // Update cart count in header
                updateCartCount(cart.reduce((total, item) => total + item.quantity, 0));
            }
            
            // Function to update cart count in header
            function updateCartCount(count) {
                const cartCountElement = document.querySelector('.cart-count');
                if (cartCountElement) {
                    cartCountElement.textContent = count;
                    if (count > 0) {
                        cartCountElement.classList.add('active');
                    } else {
                        cartCountElement.classList.remove('active');
                    }
                }
            }
            
            // Function to show notification
            function showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.classList.add('active');
                
                setTimeout(() => {
                    notification.classList.remove('active');
                }, 3000);
            }
            
            // Initialize cart count
            const cart = JSON.parse(localStorage.getItem('cart') || '[]');
            updateCartCount(cart.reduce((total, item) => total + item.quantity, 0));
            
            // Tab navigation
            const tabLinks = document.querySelectorAll('.tab-link');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const tabId = link.getAttribute('data-tab');
                    
                    tabLinks.forEach(link => link.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    link.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Quantity selector
            const plusBtn = document.querySelector('.plus-btn');
            const minusBtn = document.querySelector('.minus-btn');
            const quantityValue = document.querySelector('.quantity-value');
            
            if (plusBtn && minusBtn && quantityValue) {
                plusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityValue.value);
                    quantityValue.value = quantity + 1;
                });
                
                minusBtn.addEventListener('click', () => {
                    let quantity = parseInt(quantityValue.value);
                    if (quantity > 1) {
                        quantityValue.value = quantity - 1;
                    }
                });
            }
        });
    </script>
</body>
</html>